generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DATABASE_URL_UNPOOLED")
}

model Agendamento {
  id              String   @id @default(cuid())
  cliente         String
  
  // NOVO CAMPO ADICIONADO (Opcional para não quebrar dados antigos)
  telefone        String?  
  
  servico         String
  data            String
  horario         String
  status          String   @default("PENDENTE")
  valor           Float
  paymentId       String?
  
  metodoPagamento String?  
  
  createdAt       DateTime @default(now())
  
}

model PushSubscription {
  id        String   @id @default(cuid())
  endpoint  String   @unique
  p256dh    String
  auth      String
  createdAt DateTime @default(now())
}

model Configuracao {
  id                String   @id @default("settings")
  porcentagemSinal  Float    @default(50.0) // A grade que você quer (10 a 70)
  precoServico      Float    @default(1.0)  // Valor total base
  horarioAbertura   String   @default("08:00")
  horarioFechamento String   @default("20:00")
  updatedAt         DateTime @updatedAt
}

// Tabela de Serviços (Para criar cortes, unhas, sobrancelhas, etc)
model Service {
  id          String   @id @default(cuid())
  title       String   // Ex: "Corte Social"
  description String?  // Ex: "Acompanha lavagem"
  price       Float    // Ex: 30.00
  duration    Int      // Ex: 30 (minutos)
  imageUrl    String?  // Link da foto (opcional)
  active      Boolean  @default(true) // Se está visível no site
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}